(this["webpackJsonprestaurant-review-site"]=this["webpackJsonprestaurant-review-site"]||[]).push([[0],{17:function(n,e,t){n.exports=t.p+"static/media/logo.7e873e41.svg"},20:function(n,e,t){n.exports=t(29)},29:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),i=t(13),o=t.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=t(1),c=t(2);function u(){var n=Object(s.a)(["\n  body {\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n}"]);return u=function(){return n},n}var l=Object(c.a)(u()),d=t(4),f=t(5),p=t(7),m=t(6),h=t(8),g=t(3),v=t.n(g),b=t(17),w=t.n(b);function y(){var n=Object(s.a)(["\n  display: flex;\n  flex-flow: row nowrap;\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  > * {\n    transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);\n    visibility: hidden;\n    width: 0;\n\n    &.selected {\n      visibility: visible;\n      width: 100%;\n      margin-left: 0px;\n    }\n\n    &:first-child:not(.selected) {\n      width: 100%;\n      margin-left: -100%;\n    }\n  }\n"]);return y=function(){return n},n}function k(){var n=Object(s.a)(["\n  background-color: #8c92ac;\n  width: 30%;\n  height: 85vh;\n  overflow-x: hidden;\n  display: flex;\n  flex-direction: column;\n"]);return k=function(){return n},n}function x(){var n=Object(s.a)(["\n  background-color: orange;\n  width: 70%;\n  height: 85vh;\n  overflow-x: hidden;\n  position: relative;\n"]);return x=function(){return n},n}function R(){var n=Object(s.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  box-sizing: border-box;\n"]);return R=function(){return n},n}function O(){var n=Object(s.a)(["\n  width: 100%;\n  background-color: #282c34;\n  height: 15vh;\n  padding-top: 20px;\n  p {\n    margin: 5px 0px;\n  }\n"]);return O=function(){return n},n}function j(){var n=Object(s.a)(["\n  height: 48px;\n  pointer-events: none;\n\n  @keyframes App-logo-spin {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  @media (prefers-reduced-motion: no-preference) {\n    & {\n      animation: App-logo-spin infinite 4s linear;\n    }\n  }\n"]);return j=function(){return n},n}function C(){var n=Object(s.a)(["\n  text-align: center;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  font-size: calc(8px + 2vmin);\n  color: white;\n"]);return C=function(){return n},n}var E=c.b.div(C()),S=c.b.img.attrs({src:w.a,alt:"logo"})(j()),M=c.b.header(O()),P=c.b.main(R()),A=c.b.section(x()),z=c.b.section(k()),L=c.b.div(y()),N=a.a.forwardRef((function(n,e){var t=n.children;return a.a.createElement(z,null,a.a.createElement(L,{ref:e},t))}));N.displayName="SectionRight",N.propTypes={children:v.a.oneOfType([v.a.string,v.a.arrayOf(v.a.node),v.a.node]).isRequired};var T={Root:E,AppLogo:S,Header:M,Body:P,SectionLeft:A,SectionRight:N};var B=function(n){var e=n.leftSide,t=n.rightSide;return a.a.createElement(T.Root,null,a.a.createElement(T.Header,null,a.a.createElement(T.AppLogo,null),a.a.createElement("p",null,"Restaurant review.")),a.a.createElement(T.Body,null,a.a.createElement(T.SectionLeft,null,e),a.a.createElement(T.SectionRight,null,t)))};function G(){var n=Object(s.a)(["\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14),\n    0 1px 5px 0 rgba(0, 0, 0, 0.12);\n  color: rgba(0, 0, 0, 0.87);\n  overflow: hidden;\n  border: none;\n  font: inherit;\n  width: calc(100% - 20px);\n  min-height: 50px;\n  &::after {\n    clear: both;\n  }\n  &::after,\n  &::before {\n    content: '';\n    display: block;\n  }\n\n  &:focus {\n    background-color: gray;\n  }\n\n  &:hover {\n    background-color: lightgray;\n    cursor: pointer;\n  }\n"]);return G=function(){return n},n}function I(){var n=Object(s.a)(["\n  list-style: none;\n  width: 100%;\n  margin: 0 0 10px 0;\n"]);return I=function(){return n},n}function D(){var n=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 0;\n  padding: 15px 0 0 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n"]);return D=function(){return n},n}var F=c.b.ul(D()),H=c.b.li(I()),W=c.b.button.attrs({type:"button"})(G()),U=a.a.forwardRef((function(n,e){var t=n.onClick,r=n.children;return a.a.createElement(H,null,a.a.createElement(W,{onClick:t,ref:e},r))}));U.displayName="RestaurantsListCard",U.propTypes={onClick:v.a.func,children:v.a.oneOfType([v.a.string,v.a.arrayOf(v.a.node),v.a.node]).isRequired},U.defaultProps={onClick:function(){}};var q={List:F,Card:U},J=function(n){function e(){return Object(d.a)(this,e),Object(p.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(h.a)(e,n),Object(f.a)(e,[{key:"renderRestaurants",value:function(){var n=this.props,e=n.restaurants,t=n.onClickRestaurant;return e.map((function(n){return a.a.createElement(q.Card,{"data-id":n.id,key:n.id,onClick:function(e){t(n,e)}},n.restaurantName)}))}},{key:"render",value:function(){var n=this.props.className,e=this.renderRestaurants();return a.a.createElement(q.List,{className:n},e)}}]),e}(r.Component),X=t(19),Y=t(9);function Z(){var n=Object(s.a)(["\n  color: gray;\n  position: absolute;\n  top: 15px;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: 2000;\n"]);return Z=function(){return n},n}function Q(){var n=Object(s.a)(["\n  height: 100%;\n"]);return Q=function(){return n},n}var $={MapContainer:c.b.div(Q()),GettingCurrentPosition:c.b.div(Z())},K=function(n){function e(n){var t;return Object(d.a)(this,e),(t=Object(p.a)(this,Object(m.a)(e).call(this,n))).updateCurrentPositionMarker=function(){var n=Object(Y.a)(t).map,e=window.google.maps,r=e.Animation,a=e.Marker;navigator.geolocation&&(t.setState({gettingCurrentPosition:!0}),navigator.geolocation.getCurrentPosition((function(e){var i=e.coords,o={lat:i.latitude,lng:i.longitude};setTimeout((function(){t.setState({gettingCurrentPosition:!1}),new a({map:n,position:o,animation:r.DROP,title:"Your position"}).addListener("click",(function(){n.setZoom(13),n.setCenter(this.getPosition())}))}),400),n.setCenter(o)})))},t.updateRestaurantMarkers=function(){var n=Object(Y.a)(t),e=n.map,r=n.restaurantMarkers,a=n.props.restaurants,i=window.google.maps,o=i.Point,s=i.Size,c=i.Marker,u=i.Animation,l=i.InfoWindow;a.filter((function(n){return!Array.from(r.keys()).includes(n.id)})).forEach((function(n,t){var a=n.id,i=n.restaurantName,d=n.position,f={url:"http://localhost:3000/restaurant-review/static/media/logo.7e873e41.svg",size:new s(64,64),origin:new o(0,0),anchor:new o(17,34),scaledSize:new s(25,25)};setTimeout((function(){var t=new c({map:e,position:d,icon:f,title:i,animation:u.DROP}),o='<img\n              src="https://maps.googleapis.com/maps/api/streetview?size=400x400&location='.concat(d.lat,",").concat(d.lng,'&fov=80&heading=70&pitch=0&key=AIzaSyBwYHIy3nSGNk4Tm-HfoXQpOHbGEyA-RmA"\n              alt=""\n            />\n          '),s=new l({content:o});t.addListener("click",(function(){var n=this;this.map.setZoom(13),this.map.setCenter(this.getPosition()),Array.from(r.values()).filter((function(n){return n.id!==a})).forEach((function(n){return n.infoWindow.close()})),setTimeout((function(){s.open(n.map,t)}),100)})),r.set(a,Object(X.a)({},n,{marker:t,infoWindow:s}))}),600+20*t)}))},t.mapRef=a.a.createRef(),t.map=null,t.restaurantMarkers=new Map,t.state={gettingCurrentPosition:!1},t}return Object(h.a)(e,n),Object(f.a)(e,[{key:"componentDidMount",value:function(){var n=window.google.maps.Map;this.map=new n(this.mapRef.current,{center:{lat:20.6995456,lng:-103.35027199999999},zoom:13}),this.updateCurrentPositionMarker(),this.updateRestaurantMarkers()}},{key:"getSnapshotBeforeUpdate",value:function(n){var e=this.props,t=e.restaurants,r=e.selectedRestaurant;return n.restaurants!==t?{updateRestaurants:!0}:n.selectedRestaurant!==r?{updateSelectedRestaurant:!0}:null}},{key:"componentDidUpdate",value:function(n,e,t){if(console.log("trying updating"),t&&t.updateRestaurants&&(console.log("updating"),this.updateRestaurantMarkers()),t&&t.updateSelectedRestaurant){var r=this.props.selectedRestaurant,a=window.google.maps.event.trigger;if(r)a(this.restaurantMarkers.get(r.id).marker,"click");else{var i=this.restaurantMarkers;Array.from(i.values()).forEach((function(n){return n.infoWindow.close()}))}}}},{key:"renderGettingCurrentPositionIndicator",value:function(){return this.state.gettingCurrentPosition?a.a.createElement($.GettingCurrentPosition,null,"Getting current location from your device\xa0..."):null}},{key:"render",value:function(){var n=this.renderGettingCurrentPositionIndicator();return a.a.createElement(a.a.Fragment,null,n,a.a.createElement($.MapContainer,{ref:this.mapRef}))}}]),e}(r.Component);K.defaultProps={selectedRestaurant:null};var V=function(n){function e(n){var t;return Object(d.a)(this,e),(t=Object(p.a)(this,Object(m.a)(e).call(this,n))).handleClickRestaurant=function(n){t.setState({selectedRestaurant:n})},t.state={restaurants:[],selectedRestaurant:null},t}return Object(h.a)(e,n),Object(f.a)(e,[{key:"componentDidMount",value:function(){var n=this;fetch("/restaurant-review/api/restaurants.json").then((function(n){return n.json()})).then((function(e){return n.setState({restaurants:e})}))}},{key:"renderMap",value:function(){var n=this.state,e=n.restaurants,t=n.selectedRestaurant;return a.a.createElement(K,{restaurants:e,selectedRestaurant:t})}},{key:"renderList",value:function(){var n=this,e=this.state,t=e.restaurants,r=e.selectedRestaurant;return a.a.createElement(a.a.Fragment,null,a.a.createElement(J,{className:r?"":"selected",restaurants:t,onClickRestaurant:this.handleClickRestaurant}),a.a.createElement("div",{className:r?"selected":""},a.a.createElement("button",{type:"button",onClick:function(){return n.setState({selectedRestaurant:null})}},"Form")))}},{key:"render",value:function(){var n=this.renderMap(),e=this.renderList();return a.a.createElement(B,{leftSide:n,rightSide:e})}}]),e}(r.Component);o.a.render(a.a.createElement(a.a.Fragment,null,a.a.createElement(l,null),a.a.createElement(V,null)),document.getElementById("app-render")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.f45d34ae.chunk.js.map